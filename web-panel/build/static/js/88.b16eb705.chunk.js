(window["webpackJsonpgogo-react"]=window["webpackJsonpgogo-react"]||[]).push([[88],{1100:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a.n(n),s=a(269),l=a(27),c=a(256),i=a(257),o=a(259),u=a(258),m=a(260),d=a(1),p=a.n(d),h=a(353),g=a(284),E=a(285),f=a(276),v=a(385),b=a(469),S=a(1138),O=a(1101),y=a(1102),k=a(1048),N=a(1047),P=a(1103),x=a(770),C=a.n(x),w=a(287),_=a.n(w),D=a(268),j=a(267),z=a(254),I=a(265),L=a(262),A=(a(278),a(272)),R=a(271),F=a(255),T=a(39),K=a(40),G=j.object().shape({driver_id:j.string().required("Please select available driver")}),B=["","Assigned","Completed","Rejected","Cancelled","Cancelled/Rejected"],M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).getActiveDrivers=Object(l.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.state.isLoading=!0,t=K.a.GET_ACTIVE_DRIVERS,e.next=4,Object(T.a)("GET",t);case 4:200==(a=e.sent).status?(n.setState({activeDriverList:[""]}),n.setState({activeDriverList:[].concat(Object(s.a)(n.state.activeDriverList),Object(s.a)(a.data))})):I.a.error(a.message,"Error!",3e3);case 6:case"end":return e.stop()}},e)})),n.dataListRender=Object(l.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.state.isLoading=!0,t=K.a.GET_ORDERS+"?page_no="+"".concat(n.state.currentPage)+"&limit="+"".concat(n.state.selectedPageSize)+"&keyword="+"".concat(n.state.searchKeyword)+"&order_status="+"".concat(n.state.filterStatus),e.next=4,Object(T.a)("GET",t);case 4:200==(a=e.sent).status?n.setState({items:a.data.docs,totalPage:a.data.totalPages,totalItemCount:a.data.totalDocs}):I.a.error(a.message,"Error!",3e3),n.setState({isLoading:!0});case 7:case"end":return e.stop()}},e)})),n.changePageSize=function(e){n.setState({selectedPageSize:e,currentPage:1},function(){return n.dataListRender()})},n.onChangePage=function(e){n.setState({currentPage:e},function(){return n.dataListRender()}),n.props.history.push({pathname:n.props.location.pathname,state:{pageIndex:e}})},n.onSearchKey=function(e){n.setState({searchKeyword:e.target.value.toLowerCase(),currentPage:1}),"Enter"===e.key&&n.dataListRender()},n.changeOrderStatus=function(e){n.setState({filterStatus:e,currentPage:1},function(){return n.dataListRender()})},n.onSearchFilters=function(){n.setState({currentPage:1},function(){return n.dataListRender()})},n.onResetFilters=function(){n.setState({selectedPageSize:10,currentPage:1,searchKeyword:"",filterStatus:""},function(){return n.dataListRender()})},n.toggle=function(e){n.getActiveDrivers(),n.setState(function(e){return{modal:!e.modal}})},n.handleSubmit=function(){var e=Object(l.a)(r.a.mark(function e(t){var a,s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.a.isEmpty(n.state.user_permissions)){e.next=11;break}return(a=new FormData).append("driver_id",t.driver_id),a.append("order_arr",JSON.stringify(n.state.user_permissions)),s=K.a.ASSIGN_ORDER,e.next=7,Object(T.a)("POST",s,a);case 7:200==(l=e.sent).status?(I.a.success(l.message,"Success!",3e3),window.location.reload()):I.a.error(l.message,"Error!",3e3),e.next=12;break;case 11:I.a.error("Please select atleast one order.","Error!",3e3);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleChangePermissions=function(e,t){var a=e.target.value,r=e.target.checked,s=n.state.user_permissions;if(r)s||(s=[]),s.push(a);else{var l=s.indexOf(a);s.splice(l,1),s.length}n.setState({user_permissions:s})},n.mouseTrap=a(282),n.state={displayOpts:{keyword:!0,pageSizes:!0,orderStatus:!0,activeItemId:null},modal:!1,activeDriverList:[{_id:"",username:"Select Driver"}],pageSizes:[10,20,30],selectedPageSize:10,dropdownSplitOpen:!1,searchPlaceholder:"Search by Order Number",searchKeyword:"",filterStatus:"",items:[],currentPage:1,totalItemCount:0,totalPage:1,selectedItems:[],lastChecked:null,isLoading:!1,ischecked:!1,user_permissions:[],warehouseId:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.history.location.state;case 2:if(!e.sent){e.next=6;break}this.setState({currentPage:this.props.history.location.state.pageIndex}),e.next=7;break;case 6:this.setState({currentPage:1});case 7:this.dataListRender();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mouseTrap.unbind("ctrl+a"),this.mouseTrap.unbind("command+a"),this.mouseTrap.unbind("ctrl+d"),this.mouseTrap.unbind("command+d")}},{key:"render",value:function(){var e=this,t=(this.state.ischecked,this.props.match),a=(this.state.currentPage-1)*this.state.selectedPageSize+1,n=this.state.currentPage*this.state.selectedPageSize;return this.state.isLoading?p.a.createElement(d.Fragment,null,p.a.createElement("div",null,p.a.createElement(h.a,{color:"primary",size:"xs",className:"top-right-button",style:{float:"right"},onClick:function(){return e.toggle()}},p.a.createElement(F.a,{id:"pages.assign-new"}))),p.a.createElement("div",{className:"disable-text-selection"},p.a.createElement(R.a,{heading:"menu.orders",match:t,displayOpts:this.state.displayOpts,pageSizes:this.state.pageSizes,selectedPageSize:this.state.selectedPageSize,searchPlaceholder:this.state.searchPlaceholder,searchKeyword:this.state.searchKeyword,filterStatus:this.state.filterStatus,onSearchKey:this.onSearchKey,changePageSize:this.changePageSize,changeOrderStatus:this.changeOrderStatus,onSearchFilters:this.onSearchFilters,onResetFilters:this.onResetFilters,totalItemCount:this.state.totalItemCount,startIndex:a,endIndex:n}),p.a.createElement(g.a,null,p.a.createElement(z.a,{xxs:"12"},p.a.createElement(E.a,{className:"mb-4"},p.a.createElement(f.a,null,p.a.createElement(v.a,{hover:!0},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",{className:"custom-control custom-checkbox pl-1 align-self-center pr-4"},"Select order"),p.a.createElement("th",null,"Order#"),p.a.createElement("th",null,"Customer Name"),p.a.createElement("th",null,"Customer Phone Number"),p.a.createElement("th",null,"Order Status"),p.a.createElement("th",null,"Order On"),p.a.createElement("th",null,"Total Price"),p.a.createElement("th",null,"Discounted Price"),p.a.createElement("th",null,"Payment Mode"),p.a.createElement("th",null,"Action"))),p.a.createElement("tbody",null,this.state.items.map(function(t,a){return p.a.createElement("tr",{key:a},p.a.createElement("td",null,t.hasOwnProperty("driver_id")?0==t.driver_id.length&&0==t.order_status?p.a.createElement(b.a,{className:"form-check-input",type:"checkbox",onChange:function(a){e.handleChangePermissions(a,t.warehouse_id)},id:t._id,name:t._id,"data-module":t._id,value:t._id}):t.order_status>2?p.a.createElement("div",null,"Not Available"):p.a.createElement("div",null,"Assigned"):t.order_status>2?p.a.createElement("div",null,"Not Available"):p.a.createElement(b.a,{className:"form-check-input",type:"checkbox",onChange:function(a){e.handleChangePermissions(a,t.warehouse_id)},id:t._id,name:t._id,"data-module":t._id,value:t._id})),p.a.createElement("td",null,t.order_id),p.a.createElement("td",null,t.user_name," "),p.a.createElement("td",null,t.phone," "),p.a.createElement("td",null,0!=t.order_status?B[t.order_status]:"Pending"),p.a.createElement("td",null,_()(t.createdAt).format("lll")),p.a.createElement("td",null,t.net_amount),p.a.createElement("td",null,t.discounted_amount),p.a.createElement("td",null,t.payment_mode),p.a.createElement("td",null,p.a.createElement(L.c,{to:"order-detail/".concat(t._id)},p.a.createElement(h.a,{outline:!0,color:"info",size:"xs",className:"mb-2",title:"More info"},p.a.createElement("div",{className:"glyph-icon simple-icon-info",item:t})))," "))}),0==this.state.items.length&&p.a.createElement("tr",null,p.a.createElement("td",{colSpan:"5",className:"text-center"},"No data available.")))),p.a.createElement(A.a,{currentPage:this.state.currentPage,totalPage:this.state.totalPage,onChangePage:function(t){return e.onChangePage(t)}})))))),p.a.createElement(S.a,{isOpen:this.state.modal,toggle:this.toggle},p.a.createElement(O.a,{toggle:this.toggle},"Assign Driver"),p.a.createElement(y.a,null,p.a.createElement(D.c,{initialValues:{driver_id:this.state.driver_id},validationSchema:G,onSubmit:this.handleSubmit},function(t){t.handleSubmit;var a=t.setFieldValue,n=(t.setFieldTouched,t.handleChange,t.values),r=t.errors,s=t.touched;t.isSubmitting;return p.a.createElement(D.b,{className:"av-tooltip tooltip-label-bottom"},p.a.createElement(g.a,{className:"align-items-center"},p.a.createElement(z.a,{className:"text-center",xxs:"12",sm:"4"},p.a.createElement(k.a,null,"Drivers")),p.a.createElement(z.a,{xxs:"12",sm:"8"},p.a.createElement(N.a,{className:"form-group has-float-label"},p.a.createElement("select",{name:"driver_id",className:"form-control",value:n.driver_id,onChange:function(e){a("driver_id",e.target.value)}},e.state.activeDriverList.map(function(e,t){return p.a.createElement("option",{key:t,value:e._id},e.username)})),r.driver_id&&s.driver_id?p.a.createElement("div",{className:"invalid-feedback d-block"},r.driver_id):null))),p.a.createElement(P.a,null,p.a.createElement(h.a,{color:"primary",type:"submit"},"Assign")," ",p.a.createElement(h.a,{color:"secondary",onClick:e.toggle},"Cancel")))})))):p.a.createElement("div",{className:"loading"})}}]),t}(d.Component);t.default=M},254:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return c});var n=a(1),r=a.n(n),s=a(283),l=function(e){return r.a.createElement(s.a,Object.assign({},e,{widths:["xxs","xs","sm","md","lg","xl","xxl"]}))},c=function(e){return r.a.createElement("div",{className:"separator ".concat(e.className)})}},261:function(e,t,a){"use strict";var n=a(1),r=a.n(n),s=a(274),l=a(275),c=a(262),i=a(255),o=function(e){return r.a.createElement(i.a,{id:"menu.".concat(e)})},u=function(e,t,a){return 0===a?"":e.split(t)[0]+t},m=function(e){var t=e.match.path.substr(1),a=t.split("/");return a[a.length-1].indexOf(":")>-1&&(a=a.filter(function(e){return-1===e.indexOf(":")})),r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{className:"pt-0 breadcrumb-container d-none d-sm-block d-lg-inline-block"},a.map(function(e,n){return r.a.createElement(l.a,{key:n,active:a.length===n+1},a.length!==n+1?r.a.createElement(c.c,{to:"/"+u(t,e,n)},o(e)):o(e))})))};t.a=function(e){var t=e.heading,a=e.match;return r.a.createElement(n.Fragment,null,t&&r.a.createElement("h1",null,r.a.createElement(i.a,{id:t})),r.a.createElement(m,{match:a}))}},271:function(e,t,a){"use strict";var n=a(256),r=a(257),s=a(259),l=a(258),c=a(260),i=a(1),o=a.n(i),u=a(284),m=a(353),d=a(1056),p=a(1137),h=a(1051),g=a(1052),E=a(1053),f=a(444),v=a(421),b=a(264),S=a(262),O=a(254),y=a(261),k=a(255),N=[{column:"",label:"All"},{column:"1",label:"Active"},{column:"0",label:"Inactive"}],P=[{value:"",label:"Select"},{value:"1",label:"Last 30 Days"},{value:"2",label:"Last 60 Days"},{value:"3",label:"Last 90 Days"}],x=[{value:"",label:"Select"},{value:"20",label:"20 K"},{value:"40",label:"40 K"}],C=[{value:"",label:"Select"},{value:"",label:"All"},{value:"2",label:"Passed"},{value:"1",label:"Current"}],w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this))).togglePopover=function(){a.setState(function(e){return{popoverOpen:!e.popoverOpen}})},a.showPopover=function(){a.setState(function(e){return{popoverOpen:!0}})},a.hidePopover=function(){a.setState(function(e){return{popoverOpen:!1}})},a.toggleDisplayOptions=function(){a.setState(function(e){return{displayOptionsIsOpen:!e.displayOptionsIsOpen}})},a.toggleSplit=function(){a.setState(function(e){return{dropdownSplitOpen:!e.dropdownSplitOpen}})},a.state={popoverOpen:!1,dropdownSplitOpen:!1,displayOptionsIsOpen:!1,selectedStatusOption:N[0],selectedDaysOption:P[0],selectedAmountOption:x[0],selectedOrderStatus:C[0]},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=(this.props.intl.messages,this.props),a=t.heading,n=t.match,r=t.addNewItemRoute,s=t.displayOpts,l=t.orderOptions,c=t.pageSizes,i=t.selectedPageSize,b=t.selectedOrderOption,w=t.searchKeyword,_=t.searchPlaceholder,D=t.filterFromDate,j=t.filterToDate,z=(t.filterStatus,t.onSearchKey),I=t.onChangeFromDate,L=t.onChangeToDate,A=t.changeOrderBy,R=t.changeStatus,F=t.changeDaysStatus,T=t.changeAmountStatus,K=t.changeOrderStatus,G=t.changePageSize,B=t.onResetFilters,M=t.onSearchFilters,V=t.totalItemCount,J=t.startIndex,q=t.endIndex,U=(t.daysStatus,t.amountStatus,this.state.displayOptionsIsOpen);return o.a.createElement(u.a,null,o.a.createElement(O.a,{xxs:"12"},o.a.createElement("div",{className:"mb-2"},o.a.createElement("h1",null,o.a.createElement(k.a,{id:a})),s&&s.addNewBtn&&o.a.createElement("div",{className:"text-zero top-right-button-container"},o.a.createElement(S.c,{to:r},o.a.createElement(m.a,{color:"primary",size:"lg",className:"top-right-button"},o.a.createElement(k.a,{id:"pages.add-new"})))),o.a.createElement(y.a,{match:n})),s&&(s.addNewBtn||s.orderOptions||s.pageSizes||s.keyword||s.fromDate||s.toDate)&&o.a.createElement("div",{className:"mb-2"},o.a.createElement(d.a,{isOpen:U,className:"d-md-block",id:"displayOptions"},o.a.createElement("div",{className:"d-block d-md-inline-block pt-1"},s&&s.orderOptions&&o.a.createElement(p.a,{className:"mr-1 float-md-left btn-group mb-1"},o.a.createElement(h.a,{caret:!0,color:"outline-dark",size:"xs"},o.a.createElement(k.a,{id:"pages.orderby"}),b.label),o.a.createElement(g.a,null,l.map(function(e,t){return o.a.createElement(E.a,{key:t,onClick:function(){return A(e.column)}},e.label)}))),s&&s.keyword&&o.a.createElement("div",{className:"search-sm d-inline-block float-md-left mr-1 mb-1 align-top"},o.a.createElement("input",{type:"text",name:"keyword",id:"search",value:w,placeholder:"Type and enter...",onChange:function(t){z(t),e.hidePopover()},onKeyPress:function(e){return z(e)},onFocus:this.showPopover,onBlur:this.hidePopover}),s&&(s.keyword||s.daysOptions||s.orderStatus||s.amountOptions||s.fromDate||s.toDate)&&o.a.createElement(m.a,{outline:!0,color:"danger",className:"mb-2 btn-xs search_btn",onClick:function(){M()}})," ",o.a.createElement(f.a,{className:"search-popover",placement:"top",isOpen:this.state.popoverOpen,target:"search"},o.a.createElement(v.a,null,_))),s&&s.fromDate&&o.a.createElement("div",{className:"filter-date-sm d-inline-block float-md-left mr-1 mb-1 align-top"},o.a.createElement("input",{type:"date",name:"fromdate",id:"fromdate",value:D,placeholder:"dd/mm/yyyy",onChange:function(e){return I(e)}})),s&&s.toDate&&o.a.createElement("div",{className:"filter-date-sm d-inline-block float-md-left mr-1 mb-1 align-top"},o.a.createElement("input",{type:"date",name:"todate",id:"todate",value:j,placeholder:"dd/mm/yyyy",onChange:function(e){return L(e)}})),s&&s.daysOptions&&o.a.createElement(p.a,{className:"mr-1 float-md-left btn-group mb-1"},o.a.createElement(h.a,{caret:!0,color:"outline-dark",size:"xs"},o.a.createElement(k.a,{id:"pages.status"}),this.state.selectedDaysOption.label),o.a.createElement(g.a,null,P.map(function(t,a){return o.a.createElement(E.a,{key:a,onClick:function(){e.setState({selectedDaysOption:P[a]}),F(t.value)}},t.label)}))),s&&s.amountOptions&&o.a.createElement(p.a,{className:"mr-1 float-md-left btn-group mb-1"},o.a.createElement(h.a,{caret:!0,color:"outline-dark",size:"xs"},o.a.createElement(k.a,{id:"pages.status"}),this.state.selectedAmountOption.label),o.a.createElement(g.a,null,x.map(function(t,a){return o.a.createElement(E.a,{key:a,onClick:function(){e.setState({selectedAmountOption:x[a]}),T(t.value)}},t.label)}))),s&&s.orderStatus&&o.a.createElement(p.a,{className:"mr-1 float-md-left btn-group mb-1"},o.a.createElement(h.a,{caret:!0,color:"outline-dark",size:"xs"},o.a.createElement(k.a,{id:"pages.status"}),this.state.selectedOrderStatus.label),o.a.createElement(g.a,null,C.map(function(t,a){return o.a.createElement(E.a,{key:a,onClick:function(){e.setState({selectedOrderStatus:C[a]}),K(t.value)}},t.label)}))),s&&s.statusOptions&&o.a.createElement(p.a,{className:"mr-1 float-md-left btn-group mb-1"},o.a.createElement(h.a,{caret:!0,color:"outline-dark",size:"xs"},o.a.createElement(k.a,{id:"pages.status"}),this.state.selectedStatusOption.label),o.a.createElement(g.a,null,N.map(function(t,a){return o.a.createElement(E.a,{key:a,onClick:function(){e.setState({selectedStatusOption:N[a]}),R(t.column)}},t.label)}))),s&&(s.keyword||s.daysOptions||s.orderStatus||s.amountOptions||s.fromDate||s.toDate)&&o.a.createElement(m.a,{outline:!0,color:"danger",className:"mb-2 btn-xs",onClick:function(){e.setState({selectedOrderStatus:C[0]}),e.setState({selectedStatusOption:N[0]}),B()}},o.a.createElement(k.a,{id:"button.reset"}))),s&&s.pageSizes&&o.a.createElement("div",{className:"float-md-right pt-1"},o.a.createElement("span",{className:"text-muted text-small mr-1"},"".concat(J,"-").concat(q," of ").concat(V," ")),o.a.createElement(p.a,{className:"d-inline-block"},o.a.createElement(h.a,{caret:!0,color:"outline-dark",size:"xs"},i),o.a.createElement(g.a,{right:!0},c.map(function(e,t){return o.a.createElement(E.a,{key:t,onClick:function(){return G(e)}},e)})))))),o.a.createElement(O.b,{className:"mb-5"})))}}]),t}(i.Component);t.a=Object(b.d)(w)},272:function(e,t,a){"use strict";var n=a(256),r=a(257),s=a(259),l=a(258),c=a(260),i=a(1),o=a.n(i),u=a(254),m=a(1054),d=a(1055),p=a(288),h=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"onChangePage",value:function(e){this.props.onChangePage(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.totalPage,n=void 0===a?0:a,r=t.currentPage,s=void 0===r?1:r,l=t.numberLimit,c=void 0===l?5:l,i=t.lastIsActive,h=void 0===i||i,g=t.firstIsActive,E=void 0===g||g,f=1,v=c;c>n?(f=1,v=n):s<=parseInt(c/2,10)?(f=1,v=c):s+parseInt(c/2,10)<=n?(f=s-parseInt(c/2,10),v=s+parseInt(c/2,10)):(f=n-(c-1),v=n);for(var b=[],S=f=0===f?1:f;S<=v;S++)b.push(S);var O=s<=1?"disabled":"",y=s>=n?"disabled":"",k=s<=1?"disabled":"",N=s>=n?"disabled":"";return n>1?o.a.createElement(u.a,{xxs:"12",className:"mt-3"},o.a.createElement(m.a,{className:"pagination justify-content-center"},E&&o.a.createElement(d.a,{className:"page-item ".concat(O)},o.a.createElement(p.a,{className:"page-link first",onClick:function(){return e.onChangePage(1)}},o.a.createElement("i",{className:"simple-icon-control-start"}))),o.a.createElement(d.a,{className:"page-item ".concat(k)},o.a.createElement(p.a,{className:"page-link prev",onClick:function(){return e.onChangePage(s-1)}},o.a.createElement("i",{className:"simple-icon-arrow-left"}))),b.map(function(t){return o.a.createElement(d.a,{key:t,className:"page-item ".concat(s===t&&"active")},o.a.createElement(p.a,{className:"page-link",onClick:function(){return e.onChangePage(t)}},t))}),o.a.createElement(d.a,{className:"page-item ".concat(N)},o.a.createElement(p.a,{className:"page-link next",onClick:function(){return e.onChangePage(s+1)}},o.a.createElement("i",{className:"simple-icon-arrow-right"}))),h&&o.a.createElement(d.a,{className:"page-item ".concat(y)},o.a.createElement(p.a,{className:"page-link last",onClick:function(){return e.onChangePage(n)}},o.a.createElement("i",{className:"simple-icon-control-end"}))))):o.a.createElement(u.a,{xxs:"12",className:"mt-2"})}}]),t}(o.a.Component);t.a=h}}]);
//# sourceMappingURL=88.b16eb705.chunk.js.map